<?php
defined('ABSPATH') || exit;
// load transient data
function ter_kal_plugin_check_transient() {
    if ( ! get_transient( 'ter_kal_plugin_ran' ) ) {
        ter_kal_update_load_transients();
        ter_kal_activate_update();
        set_transient( 'ter_kal_plugin_ran', true, DAY_IN_SECONDS ); // Adjust expiration time as needed
    }
}
add_action( 'plugins_loaded', 'ter_kal_plugin_check_transient' );



function ter_kal_update_load_transients() {

// INIT OPTIONS  ------------------------------------------------------
// ter_kal_termin_zusatzfelder (& ter_kal_termin_basisfelder) ter_kal_kategorien   werden im db init erzeugt
// ter_kal_benutzer
// WP built in: active_plugins date_format time_format admin_email
//---------------------------------------------------------------------
//init language before calendar loads // $ter_kal_lang = get_transient('ter_kal_lang');
$user_language = get_user_locale() ?: get_locale() ?: 'en';
set_transient('ter_kal_lang', substr($user_language, 0, 2), DAY_IN_SECONDS);

    if (!get_option('ter_kal_dashicon_list')) {
        $dashicons = [
             'admin-appearance',
             'admin-collapse',
             'admin-comments',
             'admin-generic',
             'admin-home',
             'admin-media',
             'admin-network',
             'admin-page',
             'admin-plugins',
             'admin-settings',
             'admin-site',
             'admin-tools',
             'admin-users',
             'align-center',
             'align-left',
             'align-none',
             'align-right',
             'analytics',
             'arrow-down-alt',
             'arrow-down-alt2',
             'arrow-down',
             'arrow-left-alt',
             'arrow-left-alt2',
             'arrow-left',
             'arrow-right-alt',
             'arrow-right-alt2',
             'arrow-right',
             'arrow-up-alt',
             'arrow-up-alt2',
             'arrow-up',
             'art',
             'awards',
             'backup',
             'book-alt',
             'book',
             'building',
             'businessman',
             'calendar-alt',
             'calendar',
             'camera',
             'carrot',
             'cart',
             'category',
             'chart-area',
             'chart-bar',
             'chart-line',
             'chart-pie',
             'clipboard',
             'clock',
             'cloud',
             'dashboard',
             'desktop',
             'dismiss',
             'download',
             'edit',
             'editor-aligncenter',
             'editor-alignleft',
             'editor-alignright',
             'editor-bold',
             'editor-break',
             'editor-code',
             'editor-contract',
             'editor-customchar',
             'editor-distractionfree',
             'editor-expand',
             'editor-help',
             'editor-indent',
             'editor-insertmore',
             'editor-italic',
             'editor-justify',
             'editor-kitchensink',
             'editor-ol',
             'editor-outdent',
             'editor-paragraph',
             'editor-paste-text',
             'editor-paste-word',
             'editor-quote',
             'editor-removeformatting',
             'editor-rtl',
             'editor-spellcheck',
             'editor-strikethrough',
             'editor-textcolor',
             'editor-ul',
             'editor-underline',
             'editor-unlink',
             'editor-video',
             'email-alt',
             'email',
             'excerpt-view',
             'exerpt-view',
             'external',
             'facebook-alt',
             'facebook',
             'feedback',
             'flag',
             'format-aside',
             'format-audio',
             'format-chat',
             'format-gallery',
             'format-image',
             'format-links',
             'format-quote',
             'format-standard',
             'format-status',
             'format-video',
             'forms',
             'googleplus',
             'grid-view',
             'groups',
             'hammer',
             'heart',
             'id',
             'id-alt',
             'image-crop',
             'image-flip-horizontal',
             'image-flip-vertical',
             'image-rotate-left',
             'image-rotate-right',
             'images-alt',
             'images-alt2',
             'info',
             'leftright',
             'lightbulb',
             'list-view',
             'location-alt',
             'location',
             'lock',
             'marker',
             'media-archive',
             'media-audio',
             'media-code',
             'media-default',
             'media-document',
             'media-interactive',
             'media-spreadsheet',
             'media-text',
             'media-video',
             'megaphone',
             'menu',
             'microphone',
             'migrate',
             'minus',
             'money',
             'nametag',
             'networking',
             'no-alt',
             'no',
             'palmtree',
             'performance',
             'phone',
             'playlist-audio',
             'playlist-video',
             'plus-alt',
             'plus',
             'portfolio',
             'post-status',
             'pressthis',
             'products',
             'randomize',
             'redo',
             'rss',
             'schedule',
             'screenoptions',
             'search',
             'share1',
             'share-alt',
             'share-alt2',
             'share',
             'shield-alt',
             'shield',
             'slides',
             'smartphone',
             'smiley',
             'sort',
             'sos',
             'star-empty',
             'star-filled',
             'star-half',
             'tablet',
             'tagcloud',
             'tag',
             'testimonial',
             'text',
             'thumbs-down',
             'thumbs-up',
             'tickets-alt',
             'tickets',
             'tide',
             'translation',
             'trash',
             'twitter',
             'undo',
             'universal-access-alt',
             'universal-access',
             'unlock',
             'update',
             'upload',
             'vault',
             'video-alt',
             'video-alt2',
             'video-alt3',
             'visibility',
             'welcome-add-page',
             'welcome-comments',
             'welcome-edit-page',
             'welcome-learn-more',
             'welcome-view-site',
             'welcome-widgets-menus',
             'welcome-write-blog',
             'wordpress-alt',
             'wordpress',
             'yes',
         ];
         update_option('ter_kal_dashicon_list', $dashicons);
    }
}  // end ter_kal_load_transients and options --------------------------------------
